#!/usr/bin/env ruby -I lib
# frozen_string_literal: true

require 'word_clock/stripe'
require 'word_clock/simulator'

stripe = WordClock::Stripe.new
clock = WordClock::Simulator.new(stripe)

if ARGV.size.zero?
  now = Time.new
  clock.show(stripe.pixels(now.hour, now.min))
elsif 1 == ARGV.size && '--all' == ARGV.first
  (0..23).each do |hour|
    (0..59).each do |minute|
      clock.show(stripe.pixels(hour, minute))
    end
  end
elsif 2 == ARGV.size
  clock.show(stripe.pixels(ARGV.first.to_i, ARGV.last.to_i))
else
  warn "Unknown arguments #{ARGV}"
  exit
end
